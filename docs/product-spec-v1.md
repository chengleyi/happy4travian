# happy4travian 产品规格 V1

## 目标
- 为 Travian 联盟提供服务器内协作工具，覆盖联盟管理、账号与村庄数据、兵力汇报、防御与联攻、资源支援、战报沉淀。

## 用户与角色
- 盟主、官员、成员（主体为游戏账号）
- 绑定微信用户，用于登录与通知

## 关键流程
- 登录：微信 `code2Session` → 绑定 `users` → 发 JWT
- 联盟：创建、邀请、审核，成员主体为 `game_accounts`
- 村庄：账号归属村庄，坐标与人口录入
- 兵力：村庄×兵种上传，联盟聚合展示
- 防御：需求发布、成员认领、倒计时提醒
- 联攻：目标与波次、角色分工、到达时间校准
- 资源：短缺申请、认领与执行状态
- 战报：文本/图片录入、基础解析、关联事件

## 端与技术
- 前端：`uni-app` 小程序优先，后续直接编译为 H5
- 后端：Java Spring Boot 3，MySQL，Redis，OSS
- 接口：REST `/api/v1`，JWT 授权

## 数据模型要点
- 以 `servers` 为分区核心，所有实体显式携带或可推导 `server_id`
- 成员主体为 `game_accounts`，村庄归属账号，兵种按 `tribes/troop_types`

## V1 范围
- 登录与账号绑定
- 联盟与成员管理
- 村庄与兵力上传与汇总
- 防御需求与认领
- 联攻计划基础
- 资源支援基础
- 战报录入与查询

## 里程碑
- M0：骨架与登录
- M1：联盟/成员、村庄/兵力
- M2：防御与联攻
- M3：资源与战报
- M4：H5 编译与运维

## 运维
- ECS + Docker + Nginx + HTTPS
- RDS（MySQL）与 OSS
- 日志与监控（可选）